import{f as m,r as V,a as B}from"./utils-3b29562a.js";import{d as F,r as f,u as P,w as j,f as q,o as r,c,b as t,g as E,h as M,i as d,F as N,t as y,n as $,j as k,k as w,l as D,M as x,m as z,B as _,q as b,s as L,v as O,p as T,a as A,x as G,_ as H}from"./index-bd023971.js";const h=i=>(T("data-v-163fd64d"),i=i(),A(),i),J={class:"container"},K=h(()=>t("div",{class:"heading"},[t("h1",null,"Picture of the day!"),t("span",{class:"sub-title"}," Discover the stunning image chosen for today's picture. ")],-1)),Q={class:"datepicker-container"},R=h(()=>t("label",{for:"datepicker"},"Select Date:",-1)),W=["value"],X={key:0,class:"image-wrapper"},Y=["src","alt"],Z=h(()=>t("i",{class:"cs-heart"},null,-1)),U=[Z],ee={key:1},ae=F({__name:"DailyPic",setup(i){const a=f(null),l=f(""),n=f(!1),u=P(),I=async(s=l.value)=>{a.value=null;try{const e=await B.get(`https://api.nasa.gov/planetary/apod?api_key=${window.nasa_api_key}&date=${s}`);if(a.value=e.data,u.state.user){const o=x(w(D,"favoriteImages"),_("uuid","==",u.state.user.uid),_("image","==",a.value.url)),p=await b(o);n.value=!p.empty,console.log(n.value)}}catch(e){console.error(e),a.value=null}},C=async(s,e)=>{const o=w(D,"favoriteImages"),p=x(o,_("uuid","==",e),_("image","==",s),z(1)),g=await b(p);if(g.empty){const v={uuid:e,image:s,created_at:G()};try{await L(o,v),n.value=!0}catch(S){console.error("Error adding favorite image:",S)}}else await O(g.docs[0].ref).then(()=>{console.log("Document successfully deleted!"),n.value=!1}).catch(v=>{console.error("Error deleting document:",v)})};return j(l,s=>{const e=m(s);l.value=e,I()}),q(()=>{const s=m(new Date);l.value=s}),(s,e)=>(r(),c("div",J,[K,t("div",Q,[R,E(d(V),{format:d(m),modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),"max-date":new Date},{"dp-input":M(({value:o})=>[t("input",{type:"text",value:o},null,8,W)]),_:1},8,["format","modelValue","max-date"])]),a.value?(r(),c(N,{key:0},[t("h1",null,y(a.value.title),1),t("p",null,y(a.value.explanation),1),a.value.url?(r(),c("div",X,[t("img",{src:a.value.url,alt:a.value.title},null,8,Y),d(u).state.user?(r(),c("button",{key:0,onClick:e[1]||(e[1]=o=>C(a.value.url,d(u).state.user.uid)),class:$({liked:n.value})},U,2)):k("",!0)])):k("",!0)],64)):(r(),c("p",ee,"Loading..."))]))}});const oe=H(ae,[["__scopeId","data-v-163fd64d"]]);export{oe as default};
